import matplotlib.pyplot as plt

data = [
    (1590160550618880168, 3.741785),
    (1590161423741498421, 3.733927),
    (1590162296718365023, 3.724771),
    (1590163168584554794, 3.723103),
    (1590164040628225991, 3.714913),
    (1590164941581685741, 3.700903),
    (1590165813633836220, 3.70057),
    (1590166685663609494, 3.704544),
    (1590167557696326785, 3.694746),
    (1590168429710848896, 3.688383),
    (1590169301740919520, 3.680689),
    (1590170173897091368, 3.666333),
    (1590171048791426472, 3.667528),
    (1590171925824967196, 3.656857),
    (1590172798811196972, 3.665703),
    (1590173671766653213, 3.659383),
    (1590174546699684904, 3.653203),
    (1590175419778426024, 3.651362),
    (1590176292742935055, 3.648547),
    (1590177165748282170, 3.644358),
    (1590178040755267606, 3.63502),
    (1590178913876205186, 3.624517),
    (1590179786727989776, 3.627356),
    (1590180657849704883, 3.619683),
    (1590181529829232729, 3.622849),
    (1590182401777040734, 3.614341),
    (1590183273681661008, 3.600833),
    (1590184145758368472, 3.604002),
    (1590185016902161490, 3.592831),
    (1590185889743543233, 3.587656),
    (1590186762649391313, 3.597499),
    (1590187635717618242, 3.582164),
    (1590188508761556621, 3.573993),
    (1590189385769716084, 3.570154),
    (1590190258852404660, 3.570488),
    (1590191131866921506, 3.562646),
    (1590192004799397875, 3.553641),
    (1590192877838422402, 3.549291),
    (1590193750761395746, 3.545159),
    (1590194622837477898, 3.537316),
    (1590195494855348972, 3.519155),
    (1590196366792130589, 3.507795),
    (1590197238809235939, 3.512797),
    (1590198112800014564, 3.50246),
    (1590198984740065632, 3.493456),
    (1590199856735123707, 3.497791),
    (1590200728720301342, 3.478817),
    (1590201602736048107, 3.476632),
    (1590202504456676171, 3.473078),
    (1590203375725559659, 3.462853),
    (1590204246668375567, 3.461628),
    (1590205117678058839, 3.4564),
    (1590213423020398033, 3.759578),
    (1590213939269047915, 3.768144),
    (1590214219528390475, 3.752249),
    (1590230969329347430, 4.24413),
    (1590231982326186349, 4.226319),
    (1590232995883701018, 4.217495),
    (1590234007601594099, 4.208923),
    (1590235021396362308, 4.198668),
    (1590236033544190267, 4.192338),
    (1590237047478221152, 4.180333),
    (1590238057427624239, 4.177655),
    (1590239071426968387, 4.166334),
    (1590240083464686592, 4.161489),
    (1590241098308097823, 4.156691),
    (1590242113283648410, 4.157512),
    (1590243126719110113, 4.155935),
    (1590244138497198257, 4.149),
    (1590245152408350187, 4.142516),
    (1590246166521289825, 4.149091),
    (1590247180380872096, 4.130481),
    (1590248193276087314, 4.135482),
    (1590249207405870872, 4.13224),
    (1590250217770524617, 4.12948),
    (1590251229663883600, 4.12724),
    (1590252241284193131, 4.123376),
    (1590253255544524786, 4.122333),
    (1590254265501929242, 4.126334),
    (1590255279361589626, 4.119617),
    (1590256291501070827, 4.119433),
    (1590257307422463006, 4.109475),
    (1590258321488623860, 4.109667),
    (1590259337688961271, 4.108424),
    (1590260350410773376, 4.106756),
    (1590261363428976988, 4.110238),
    (1590262376382903560, 4.098278),
    (1590263388598936968, 4.108622),
    (1590264400458666397, 4.10214),
    (1590265414470632422, 4.092393),
    (1590266426355825717, 4.096667),
    (1590267439734769757, 4.094725),
    (1590268451450069580, 4.097764),
    (1590269464897398356, 4.094392),
    (1590270476728426548, 4.096235),
    (1590271486715983413, 4.094628),
    (1590272490542468766, 4.084),
    (1590273481582693597, 4.088062),
    (1590274463642689634, 4.089432),
    (1590275445581028946, 4.091136),
    (1590276459603116566, 4.09),
    (1590277470512142684, 4.081935),
    (1590278484809890101, 4.092607),
    (1590279497546082460, 4.085333),
    (1590280511546195712, 4.081399),
    (1590281525541428303, 4.076),
    (1590282537847223845, 4.083736),
    (1590283548560440417, 4.076868),
    (1590284560698842840, 4.078033),
    (1590285574462450494, 4.071405),
    (1590286586589270937, 4.077133),
    (1590287599482242284, 4.071465),
    (1590288613546828792, 4.06241),
    (1590289625521758959, 4.066667),
    (1590290638467633860, 4.071262),
    (1590291651567331108, 4.059745),
    (1590292664521897075, 4.069435),
    (1590293676766754885, 4.064796),
    (1590294684792762539, 4.062538),
    (1590295695530723097, 4.068508),
    (1590296709448059250, 4.060078),
    (1590297720455839457, 4.058539),
    (1590298733530390773, 4.061205),
    (1590299744571722665, 4.055311),
    (1590300757552148985, 4.046543),
    (1590319644394990468, 4.010106),
    (1590320657538978305, 4.007441),
    (1590321672564840986, 4.00211),
    (1590322683562900733, 4.006441),
    (1590323696491968241, 4.000111),
    (1590324707599275919, 3.999111),
    (1590325719439754103, 4.003),
    (1590326731388568962, 3.990775),
    (1590327747373275263, 3.98356),
    (1590328758994827466, 3.989667),
    (1590329772804111288, 3.982773),
    (1590330784461549198, 3.983114),
    (1590331796521697397, 3.978562),
    (1590332809782380212, 3.979667),
    (1590333823499458922, 3.980333),
    (1590334833401376059, 3.976876),
    (1590335847689365308, 3.977095),
    (1590336860746692003, 3.968218),
    (1590337870349193957, 3.972644),
    (1590338879567437749, 3.975333),
    (1590339892478179490, 3.973989),
    (1590340904568326591, 3.963233),
    (1590341918444312722, 3.966537),
    (1590342931733726379, 3.947785),
    (1590343945419821804, 3.947141),
    (1590344957439393421, 3.951195),
    (1590345967459007036, 3.957866),
    (1590346981408489444, 3.952196),
    (1590347991458141585, 3.945119),
    (1590349003488399269, 3.94112),
    (1590349988685365858, 3.94786),
    (1590351002422693221, 3.938855),
    (1590352014540662423, 3.933519),
    (1590353024750647558, 3.942524),
    (1590354040478616019, 3.941547),
    (1590355052449435777, 3.93),
    (1590356062448087491, 3.934186),
    (1590357075483819510, 3.922155),
    (1590358088489919297, 3.930788),
    (1590359099680191427, 3.923244),
    (1590360110978684220, 3.926364),
    (1590361124458700352, 3.924667),
    (1590362137540096417, 3.923),
    (1590363151634801638, 3.917333),
    (1590364165490967220, 3.91342),
    (1590365179536675774, 3.921244),
    (1590366192795643414, 3.908914),
    (1590367206432886611, 3.909876),
    (1590368218539057310, 3.904),
    (1590369230465396780, 3.906876),
    (1590370241933606785, 3.906295),
    (1590371254917052707, 3.902499),
    (1590372268405060586, 3.902293),
    (1590373282825336323, 3.888173),
    (1590374291443794685, 3.904249),
    (1590375301870867991, 3.898459),
    (1590376311867668157, 3.896082),
    (1590377324483398795, 3.893918),
    (1590378332798566419, 3.898917),
    (1590379343497731638, 3.890874),
    (1590380354885623416, 3.886206),
    (1590381367537115588, 3.887127),
    (1590382379354157129, 3.887873),
    (1590383389869782708, 3.885746),
    (1590384400587421563, 3.87718),
    (1590385413438412151, 3.876129),
    (1590386425566384010, 3.870183),
    (1590387437466861878, 3.873591),
    (1590388447507526367, 3.872463),
    (1590389459427677318, 3.869075),
    (1590390469426207567, 3.871151),
    (1590391479466599840, 3.868851),
    (1590392491586051440, 3.86261),
    (1590393503473122990, 3.860855),
    (1590394513450312899, 3.862464),
    (1590395525635642870, 3.864277),
    (1590396535534158011, 3.860131),
    (1590397547512770492, 3.847931),
    (1590398559477268495, 3.85186),
    (1590399569566981615, 3.849597),
    (1590400579694348998, 3.841733),
    (1590401594503443330, 3.846265),
    (1590402606590881622, 3.836601),
    (1590403616722121822, 3.838),
    (1590404629724255554, 3.8396),
    (1590405641691715026, 3.831871),
    (1590406651869038415, 3.830469),
    (1590407662529857665, 3.829802),
    (1590408670891331801, 3.823124),
    (1590409686486395534, 3.820211),
    (1590410696783512792, 3.82627),
    (1590411707545191424, 3.822469),
    (1590412720623157345, 3.818939),
    (1590413731689507955, 3.820197),
    (1590414743656136354, 3.805886),
    (1590415754507990205, 3.81665),
    (1590416763603989212, 3.814453),
    (1590417781581706518, 3.802333),
    (1590418795848038963, 3.806472),
    (1590419809658686104, 3.797557),
    (1590420824495425190, 3.79689),
    (1590421838780301332, 3.796721),
    (1590422850531343066, 3.79244),
    (1590423862520816242, 3.802113),
    (1590424875822185640, 3.795109),
    (1590425889811418222, 3.796109),
    (1590426899676287984, 3.792107),
    (1590427909757282732, 3.785192),
    (1590428921591818746, 3.781768),
    (1590429931783372378, 3.786629),
    (1590430945537515520, 3.774191),
    (1590431959515406874, 3.775667),
    (1590432969737571021, 3.775048),
    (1590433960525494009, 3.774431),
    (1590434942745965932, 3.764856),
    (1590435929533031349, 3.78005),
    (1590436911700779799, 3.781818),
    (1590437924554603882, 3.766472),
    (1590438936764170113, 3.773764),
    (1590439938535061362, 3.765805),
    (1590440918860109486, 3.762135),
    (1590441929461844322, 3.767477),
    (1590442941333217034, 3.756421),
    (1590443953336431204, 3.75571),
    (1590444965365700606, 3.755754),
    (1590445978515840205, 3.750458),
    (1590446968590297895, 3.754086),
    (1590447948656025251, 3.752794),
    (1590448930678047514, 3.756522),
    (1590449912833159498, 3.746895),
    (1590450894836130367, 3.744414),
    (1590451908369826630, 3.742266),
    (1590452924535041036, 3.739558),
    (1590453936979220956, 3.740078),
    (1590454951359439605, 3.746122),
    (1590455962470757961, 3.734445),
    (1590456973567139195, 3.731333),
    (1590457185616658119, 3.733259),
    (1590458198364421635, 3.733148),
    (1590459211646439834, 3.725632),
    (1590460224762726397, 3.728184),
    (1590461238396119326, 3.73063),
    (1590462248436507089, 3.72859),
    (1590463261403249956, 3.7197),
    (1590464275563554660, 3.719099),
    (1590465289552367027, 3.718667),
    (1590466300407495159, 3.718765),
    (1590467311468478574, 3.716333),
    (1590468325371152024, 3.707485),
    (1590469335606042072, 3.716549),
    (1590470348387597017, 3.71373),
    (1590471360639060943, 3.710364),
    (1590472373460599630, 3.704211),
    (1590473387564227465, 3.70803),
    (1590474397680422012, 3.711275),
    (1590475409547773860, 3.705878),
    (1590476421430821502, 3.700208),
    (1590477433583874198, 3.699542),
    (1590478444316481708, 3.69608),
    (1590479456443664535, 3.696747),
    (1590480468595152933, 3.693206),
    (1590481479431858139, 3.68774),
    (1590482494353720933, 3.683582),
    (1590483508374687011, 3.686643),
    (1590484520754434216, 3.690692),
    (1590485535363839856, 3.690333),
    (1590486547697444020, 3.691435),
    (1590487560386391249, 3.680534),
    (1590488572776118435, 3.685941),
    (1590489585370566983, 3.686072),
    (1590490597697486974, 3.679066),
    (1590491611564583917, 3.678377),
    (1590492596665228333, 3.681424),
    (1590493606537863608, 3.670216),
    (1590494621671134337, 3.664738),
    (1590495633577111444, 3.666546),
    (1590496645523333073, 3.67255),
    (1590497627499065350, 3.668057),
    (1590498641561578093, 3.672571),
    (1590499653519445198, 3.667704),
    (1590500665532602211, 3.667251),
]

xa, ya = (1590393503473122990, 3.860855)
xb, yb = (1590485535363839856, 3.690333)

k = (ya  - yb) / (xa - xb)
b = ya - k * xa

x_init = (4.25 - b) / k
x_final = (3.4 - b) / k

plt.ylim(3.4, 4.25)
plt.plot(
    [d[0] for d in data],
    [d[1] for d in data]
)
plt.plot(
    [x_init, x_final],
    [4.25, 3.4],
    '--'
)
lifetime = (3.4 - 4.25) / k
plt.title('Estimated Battery Life (4.25 ~ 3.4 V): %.2f days' % (lifetime / 1e9 / 86400))

plt.savefig('plot_vbat.png')